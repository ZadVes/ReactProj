{"ast":null,"code":"import React,{Component}from\"react\";import Header from'./components/header';import ShopList from'./components/shop-list';import{fetchProducts}from'./API/api';import OrderPage from\"./components/OrderPage\";import{BrowserRouter as Router,Routes,Route}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";class App extends Component{constructor(props){super(props);this.handleScroll=()=>{const currentScrollY=window.scrollY;if(currentScrollY>this.state.lastScrollY){this.setState({showHeader:false});}else{this.setState({showHeader:true});}this.setState({lastScrollY:currentScrollY});};//Обрабатывает локальные данные\nthis.loadProducts=async()=>{try{const response=await fetchProducts();this.setState({products:response.data,loading:false});}catch(error){console.error(\"Ошибка при загрузке товаров\",error);this.setState({error:error.message,loading:false});}};this.state={showHeader:true,lastScrollY:0,products:[],loading:true,error:null};}componentDidMount(){this.loadProducts();window.addEventListener(\"scroll\",this.handleScroll);}componentWillUnmount(){window.removeEventListener(\"scroll\",this.handleScroll);}render(){const{showHeader,products,loading,error}=this.state;if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading Tesla products...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"error\",children:[\"Error loading products: \",error,/*#__PURE__*/_jsx(\"button\",{onClick:this.loadProducts,children:\"Retry\"})]});}return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"up\",children:[/*#__PURE__*/_jsx(\"div\",{className:`header ${showHeader?\"\":\"hidden\"}`,children:/*#__PURE__*/_jsx(Header,{})}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(\"div\",{className:\"scrol-panel\",children:products.map(product=>/*#__PURE__*/_jsx(ShopList,{id:product._id,url:product.imageUrl,name:product.name,price:product.price,inf:product.description,specs:product.specs},product._id))})}),/*#__PURE__*/_jsx(Route,{path:\"/order\",element:/*#__PURE__*/_jsx(OrderPage,{})})]})]})});}}export default App;","map":{"version":3,"names":["React","Component","Header","ShopList","fetchProducts","OrderPage","BrowserRouter","Router","Routes","Route","jsx","_jsx","jsxs","_jsxs","App","constructor","props","handleScroll","currentScrollY","window","scrollY","state","lastScrollY","setState","showHeader","loadProducts","response","products","data","loading","error","console","message","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","render","className","children","onClick","path","element","map","product","id","_id","url","imageUrl","name","price","inf","description","specs"],"sources":["C:/Users/nikza/Documents/GitHub/ReactProj/client/src/App.js"],"sourcesContent":["import React, {Component} from \"react\";\r\nimport Header from './components/header';\r\nimport ShopList from './components/shop-list';\r\nimport {fetchProducts} from './API/api';\r\nimport OrderPage from \"./components/OrderPage\";\r\nimport { BrowserRouter as Router, Routes, Route } from \"react-router-dom\";\r\n\r\nclass App extends Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            showHeader: true,\r\n            lastScrollY: 0,\r\n            products: [],\r\n            loading: true,\r\n            error: null\r\n        };\r\n    }\r\n\r\n    handleScroll = () => {\r\n\r\n        const currentScrollY = window.scrollY;\r\n\r\n        if (currentScrollY > this.state.lastScrollY) {\r\n            this.setState({ showHeader: false });\r\n        } else {\r\n            this.setState({ showHeader: true }); \r\n        }\r\n\r\n        this.setState({ lastScrollY: currentScrollY });\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.loadProducts();\r\n        window.addEventListener(\"scroll\", this.handleScroll);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener(\"scroll\", this.handleScroll);\r\n    }\r\n    //Обрабатывает локальные данные\r\n    loadProducts = async () => {\r\n        try {\r\n            const response = await fetchProducts();\r\n            this.setState({ products: response.data, loading: false });\r\n        } catch (error) {\r\n            console.error(\"Ошибка при загрузке товаров\", error);\r\n            this.setState({\r\n                error: error.message,\r\n                loading: false\r\n            });\r\n        }\r\n    };\r\n\r\n    render(){\r\n        const { showHeader, products, loading, error } = this.state;\r\n\r\n        if (loading) {\r\n            return <div className=\"loading\">Loading Tesla products...</div>;\r\n        }\r\n\r\n        if (error) {\r\n            return (\r\n                <div className=\"error\">\r\n                Error loading products: {error}\r\n                <button onClick={this.loadProducts}>Retry</button>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return(\r\n            <Router>\r\n                <div className=\"up\">\r\n                    <div className={`header ${showHeader ? \"\" : \"hidden\"}`}>\r\n                        <Header />\r\n                    </div>\r\n                    <Routes>\r\n                        <Route path=\"/\" element={\r\n                            <div className='scrol-panel'>\r\n                                {products.map(product => (\r\n                                    <ShopList\r\n                                        key={product._id}\r\n                                        id={product._id}\r\n                                        url={product.imageUrl}\r\n                                        name={product.name}\r\n                                        price={product.price}\r\n                                        inf={product.description}\r\n                                        specs={product.specs}\r\n                                    />\r\n                                    ))}\r\n                            </div>\r\n                        }/>\r\n                        <Route path=\"/order\" element={<OrderPage />} />\r\n                    </Routes>\r\n                </div>\r\n            </Router>\r\n        )\r\n    }\r\n}\r\n\r\nexport default App\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}